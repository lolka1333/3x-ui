# Исправление автоматической генерации ключей для Shadowsocks 2022

## Проблема
Генерация ключей в Shadowsocks 2022 inbounds не применялась для автоматической генерации ключей клиентов. Проблема заключалась в том, что:

1. Автоматическая генерация паролей работала только в конструкторе, но не при загрузке из JSON
2. При добавлении новых клиентов автоматическая генерация паролей не срабатывала
3. При изменении метода шифрования на Shadowsocks 2022 существующие клиенты не получали автоматически сгенерированные пароли

## Решение
Были внесены следующие изменения в файл `web/assets/js/model/inbound.js`:

### 1. Улучшение конструктора `Inbound.ShadowsocksSettings`
- Добавлена автоматическая генерация паролей для всех клиентов с пустыми паролями при использовании Shadowsocks 2022 методов

### 2. Исправление метода `fromJson` в `Inbound.ShadowsocksSettings`
- Добавлена проверка и автоматическая генерация паролей для клиентов при загрузке из JSON

### 3. Улучшение `fromJson` в `Inbound.ShadowsocksSettings.Shadowsocks`
- Добавлена автоматическая генерация паролей для отдельных клиентов при загрузке из JSON

### 4. Добавление новых методов в `Inbound.ShadowsocksSettings`
- `addClient(client)` - метод для добавления нового клиента с автоматической генерацией пароля
- `updateMethod(newMethod)` - метод для обновления метода шифрования с автоматической генерацией паролей
- `setPassword(password, method)` - метод в классе `Shadowsocks` для установки пароля с автоматической генерацией

## Shadowsocks 2022 методы
Исправление применяется для следующих методов:
- `2022-blake3-aes-128-gcm`
- `2022-blake3-aes-256-gcm`
- `2022-blake3-chacha20-poly1305`

## Как это работает
1. При создании нового inbound с Shadowsocks 2022 методом автоматически генерируется пароль нужной длины
2. При добавлении новых клиентов они автоматически получают правильные пароли
3. При загрузке конфигурации из JSON клиенты с пустыми паролями автоматически получают сгенерированные пароли
4. При изменении метода шифрования на Shadowsocks 2022 существующие клиенты с пустыми паролями получают автоматически сгенерированные пароли

## Генерация ключей
Для генерации ключей используется метод `RandomUtil.randomShadowsocksPassword(method)`, который:
- Генерирует 16 байт случайных данных для AES-128 методов
- Генерирует 32 байта случайных данных для AES-256 и ChaCha20 методов
- Кодирует данные в base64 для использования в качестве пароля

## Результат
Теперь автоматическая генерация ключей для Shadowsocks 2022 работает правильно во всех сценариях:
- При создании новых inbound
- При добавлении новых клиентов
- При загрузке конфигурации из JSON
- При изменении метода шифрования

Это обеспечивает корректную работу Shadowsocks 2022 протокола с автоматически сгенерированными ключами правильной длины и формата.